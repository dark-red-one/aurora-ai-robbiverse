# HeyShopper: Executable Plan - Vision Meets Reality

**Date:** October 9, 2025  
**Status:** Final executable plan with brutal financial reality  
**Owner:** Allan Peretz, TestPilot CPG

---

## üéØ Executive Summary: The Honest Version

### Current Reality

- **Revenue:** $20,250 actual + $88K closing = $108K imminent
- **Crisis:** Using Respondent.io = **-$11 loss per shopper** (unsustainable)
- **Validation:** 40 beta customers, Simply Good Foods first paid
- **Data:** 1,298 product responses, 1,000 platform feedback entries
- **Deadline:** Walmart launch Oct 21 (12 days)

### The Vision (What We Want to Build)

1. **HeyShopper Brand Portal** - Customer testing platform
2. **HeyShopper Shopper Portal** - Own shopper panel (100% margins)
3. **Robbie@TestPilot** - Operations command center
4. **Real vs Synthetic** - Position against BASES AI Screener

### The Reality (What We Must Do First)

1. **Close $88K pipeline** - Survival depends on cash
2. **Fix margins** - Price at $69-79 OR build own panel in 6 months
3. **Ship Walmart** - Oct 21 deadline, security fixes critical
4. **Transition to own panel** - EXISTENTIAL priority, not optional

### The Path to $500K

- **Q4 2024:** $108K (close pipeline)
- **Q1 2025:** $250K (paid beta conversions + new deals)
- **Q2-Q4 2025:** $500K run rate (own panel live, margins sustainable)

**Timeline:** 12 months  
**Critical milestones:** Own panel by Month 6, enterprise deals closing, $500K run rate

---

## üö® CRITICAL ISSUE #1: Negative Margins with Respondent.io

### The Margin Crisis

**Current Economics (BROKEN):**

```
Respondent.io costs:
- Platform fee: $40/shopper
- Shopper incentive: $20/shopper
Total cost: $60/shopper

Our pricing: $49/shopper

LOSS: -$11 per shopper (-18% margin)
```

**Every test LOSES money:**

- 50 shoppers √ó -$11 = **-$550 loss per test**
- 100 tests/year = **-$55,000 annual loss**

**THIS IS UNSUSTAINABLE. WE WILL RUN OUT OF MONEY.**

### Three Options (Pick One)

#### **Option 1: Temporary Price Increase** (Fast, positive margins)

```
Price: $69-79/shopper (instead of $49)
Cost: $60/shopper (Respondent.io)
Margin: $9-19/shopper (13-24% margin)

Timeline: Immediate
Duration: Until own panel live (6 months)
Risk: Higher pricing may slow sales
```

#### **Option 2: Accept Losses as CAC** (Growth focus)

```
Accept -$11/shopper as customer acquisition cost
Treat Months 1-6 as investment period
Requires: $30-50K working capital reserve
Plan: Build own panel ASAP (6-month deadline)

Timeline: 6 months maximum
Risk: Cash runs out before panel ready
Mitigation: Secure working capital line or bridge loan
```

#### **Option 3: Build Own Panel First** (Slow but safe)

```
Start recruiting own panel before launch
Manual recruitment (universities, communities)
Delay full launch until 200+ shoppers recruited
Cost: $30/shopper once live

Timeline: 3-4 months to panel launch
Risk: Delays revenue, competitors move faster
```

### **RECOMMENDED: Hybrid Approach**

**Months 1-3: Price at $69/shopper**

- Positive margins ($9/shopper)
- Position as "premium for statistical rigor"
- Close $88K pipeline at this price
- Start panel recruitment simultaneously

**Months 4-6: Transition to Own Panel**

- Drop price to $49/shopper (competitive)
- Own panel cost: $30/shopper
- Margins improve to 39%
- Respondent.io as backup only

**Months 7-12: Scale with Own Panel**

- 80-95% own panel
- Margins: 39-53%
- Sustainable growth model
- $500K run rate achievable

---

## üí∞ Own Panel Economics (The Real Business Model)

### Startup Costs: $20-40K

```
Panel Infrastructure:
- Panel management software: $5-10K
- Screening/onboarding system: $5K
- Payment processing setup: $2-3K
- Training materials: $3-5K
- Initial marketing: $5-10K
Total: $20-30K

Plus working capital:
- First 100 shoppers √ó $20 incentive = $10K held
Grand total: $30-40K initial investment
```

### Per-Shopper Economics

```
RESPONDENT.IO (Current):
- Platform fee: $40
- Shopper incentive: $20
Total: $60/shopper
At $49 pricing: -$11 LOSS

OWN PANEL (Target):
- Platform costs: $6 (hosting, software, processing)
- Shopper incentive: $20
- Management overhead: $4
Total: $30/shopper
At $49 pricing: $19 PROFIT (39% margin!)
At $69 pricing: $39 PROFIT (56% margin!)
```

### Break-Even Analysis

```
Fixed costs: $30K setup
Variable costs: $30/shopper
Revenue: $49/shopper
Contribution margin: $19/shopper

Break-even: $30K √∑ $19 = 1,579 shoppers
At 50 shoppers/test: 32 tests
At $2,450/test avg: $78,400 revenue

Timeline to break-even: 6-8 months at current growth
```

### Scale Economics (Year 1)

```
1,000 shops annually:
Revenue: 1,000 √ó $49 = $49,000
Costs: 1,000 √ó $30 = $30,000
Gross profit: $19,000 (39% margin)

5,000 shops annually:
Revenue: 5,000 √ó $49 = $245,000
Costs: (Fixed $30K) + (5,000 √ó $26) = $160,000
Gross profit: $85,000 (35% margin improving to 53% as fixed costs amortize)
```

**The business model WORKS with own panel. Dies with Respondent.io.**

---

## üìä Tiered Sample Size Strategy

### Three Tiers with Legal Disclaimers

#### **Explorer Tier: 25 Shoppers**

**Price:** $1,225 (25 shoppers √ó $49)  
**Margin of Error:** ¬±19.6% (95% confidence)  
**Statistical Power:** 50-65%  
**Use Case:** Directional insights, exploration, concept screening

**LEGAL DISCLAIMER (Required):**

```
‚ö†Ô∏è STATISTICAL LIMITATION NOTICE

This 25-shopper study provides directional insights and qualitative 
feedback. The margin of error is approximately ¬±19.6% at 95% confidence 
level.

APPROPRIATE FOR:
‚úÖ Early concept exploration
‚úÖ Directional market feedback
‚úÖ Internal brainstorming validation

NOT APPROPRIATE FOR:
‚ùå Final launch decisions
‚ùå High-stakes investments ($500K+)
‚ùå Regulatory/legal requirements

For business-critical decisions, we recommend Professional Tier (132 shoppers) 
or higher for statistical confidence.

‚òê I understand and accept these limitations

[Continue with 25 Shoppers] [Upgrade to Professional Tier]
```

#### **Professional Tier: 132 Shoppers** ‚úÖ RECOMMENDED

**Price:** $6,468 (132 shoppers √ó $49)  
**Margin of Error:** ¬±8.5% (95% confidence)  
**Statistical Power:** 85-90%  
**Use Case:** Confident business decisions, launch validation

**Positioning:**

```
‚úÖ Industry Standard
‚úÖ Confident Decisions
‚úÖ Statistical Rigor
‚úÖ Appropriate for $500K+ launches
```

#### **Enterprise Tier: 200+ Shoppers**

**Price:** Custom (volume discounts)  
**Margin of Error:** <¬±7%  
**Statistical Power:** 95%+  
**Use Case:** High-stakes validation, regulatory requirements

---

## üîê Andre's Security Roadmap (Phased, Realistic)

### Week 1: Authentication (TIER 1 - Deal-Breakers)

**Days 1-2: MFA Implementation**

```typescript
// Using Supabase Auth (handles complexity)
await supabase.auth.mfa.enroll({
  factorType: 'totp'
});

// Configure policies
const mfaConfig = {
  required: true,  // Enterprise customers
  optional: false,  // SMB customers
  gracePeriod: '7 days'  // Time to set up
};
```

**Days 3-4: Strong Password Policies**

- 12+ characters minimum
- Complexity requirements (uppercase, lowercase, number, symbol)
- Breach checking via HaveIBeenPwned API
- Session timeout: 30 minutes

**Day 5: Session Management**

- JWT tokens with short expiry (15 min)
- Refresh token rotation
- Logout on all devices option

---

### Week 2: Row-Level Security (TIER 1 - Critical)

**Days 1-2: Enable RLS on All Tables**

```sql
-- Enable RLS
ALTER TABLE tests ENABLE ROW LEVEL SECURITY;
ALTER TABLE products ENABLE ROW LEVEL SECURITY;
ALTER TABLE responses_surveys ENABLE ROW LEVEL SECURITY;
-- ... all customer data tables

-- Basic policy pattern
CREATE POLICY "Users see own company data"
ON tests FOR SELECT
TO authenticated
USING (company_id IN (
  SELECT company_id FROM profiles WHERE id = auth.uid()
));
```

**Days 3-4: Test RLS Policies**

- Create test users with different companies
- Verify isolation (Company A can't see Company B data)
- Performance test with indexes
- Document all policies

**Day 5: Add Performance Indexes**

```sql
-- Critical for RLS performance
CREATE INDEX idx_tests_company_id ON tests(company_id);
CREATE INDEX idx_responses_test_company ON responses_surveys(test_id, company_id);
```

---

### Week 3: Input/Output Security (TIER 1)

**Days 1-2: Input Validation**

```typescript
// Server-side validation (NEVER trust client)
import Joi from 'joi';

const testSchema = Joi.object({
  name: Joi.string().min(3).max(100).required(),
  objective: Joi.string().valid('pricing', 'packaging', 'claims', 'head_to_head', 'advertising'),
  shopper_count: Joi.number().min(25).max(500)
});

// Validate EVERY API endpoint
app.post('/api/tests', async (req, res) => {
  const { error, value } = testSchema.validate(req.body);
  if (error) return res.status(400).json({ error: error.details });
  // Process validated data
});
```

**Days 3-4: XSS Prevention**

```typescript
// Install DOMPurify
import DOMPurify from 'dompurify';

// Sanitize all user input before display
const cleanHTML = DOMPurify.sanitize(userInput);

// Use textContent, not innerHTML for plain text
element.textContent = userInput;  // Safe
element.innerHTML = userInput;   // DANGEROUS

// Install helmet.js for security headers
app.use(helmet());
```

**Day 5: CSRF Protection**

```typescript
// Install csurf middleware
import csrf from 'csurf';
app.use(csrf({ cookie: true }));

// Add token to forms
<form method="POST">
  <input type="hidden" name="_csrf" value={csrfToken} />
</form>
```

---

### Week 4: Testing & Audit (TIER 1 Verification)

**Test scenarios:**

- XSS attempts (script injection)
- SQL injection (malformed inputs)
- CSRF attacks (forged requests)
- Auth bypass attempts
- RLS policy testing (cross-company access)

**Audit:**

- Run `npm audit`
- Update vulnerable dependencies
- Scan for exposed secrets (GitGuardian)
- Review all API endpoints
- Document security posture

**Success criteria:**

- All Tier 1 security implemented
- No critical vulnerabilities
- Enterprise deals unblocked
- Security doc for customers

---

## üèÉ Paid Beta "Founding Customer" Program

### NO More Free Beta

**The Problem with Free Beta:**

- Endless feature requests
- Low-quality feedback
- Poor conversion rates (18%)
- Misaligned incentives

**The Solution: Paid Beta ("Founding Customer Program")**

**Offer:**

```
Founding Customer Program

Join the first 20 brands testing with real shoppers.

Benefits:
‚úÖ 30% founding customer discount ($34.30/shopper vs $49)
‚úÖ Locked-in pricing for 12 months
‚úÖ Influence our roadmap priorities
‚úÖ Dedicated support from Allan + team
‚úÖ Early access to new features
‚úÖ Case study opportunities

Requirements:
‚Ä¢ Minimum commitment: $5,000 (100 shoppers over 12 months)
‚Ä¢ Annual contract (monthly billing)
‚Ä¢ Provide feedback within 48h of test completion
‚Ä¢ Willing to be reference customer

[Claim Your Spot] - Only 7 spots remaining!
```

**Why This Works:**

- Opt-out trial (CC required) = 48.8% conversion
- Skin in the game = serious users
- Higher LTV ($8,450 vs $6,200 for free users)
- Aligned incentives (they want it to work)

**How to Position:**

```
Email to 40 beta customers:

Subject: Invitation: Founding Customer Program (30% Off for Life)

Hey [Name],

You've been testing TestPilot for free - thank you for the feedback!

We're launching HeyShopper officially and want to invite our 
best beta users to become Founding Customers.

Here's the deal:
‚Ä¢ 30% off forever ($34.30/shopper instead of $49)
‚Ä¢ Lock in this price for 12 months minimum
‚Ä¢ Shape our roadmap (your feedback = our priorities)
‚Ä¢ Dedicated support (direct access to Allan)

Minimum: 100 shoppers over 12 months ($3,430 total)

This isn't beta anymore - this is a strategic partnership.

Interested? Let's chat this week.

Only taking 20 Founding Customers. 7 spots left.

- Allan

P.S. - If you're not ready to commit, totally understand! 
We'll have standard pricing ($49/shopper) available when you are.
```

---

## üìà Path to $500K: Hybrid Revenue Model

### The Math (Realistic)

**Q4 2024 (Oct-Dec): $108K ARR**

- Close $88K pipeline ‚Üí $65K actual closed
- Convert 5 paid beta customers ‚Üí $25K
- Add 2 new deals ‚Üí $18K
- **Total: $108K ARR**

**Q1 2025 (Jan-Mar): $250K ARR**

- Upsell existing 10 customers (15% expansion) ‚Üí +$16K
- Convert 10 more paid beta (Founding Customer program) ‚Üí +$50K
- New enterprise deals (3 at $30K) ‚Üí +$90K
- **Total: $264K ARR**

**Q2 2025 (Apr-Jun): $375K ARR**

- Own panel goes live (margins improve)
- Activities upsells (30% attach) ‚Üí +$40K
- New customers (5 at $20K) ‚Üí +$100K
- Expansion revenue ‚Üí +$25K
- **Total: $389K ARR**

**Q3-Q4 2025 (Jul-Dec): $500K+ ARR**

- Scale own panel (95% of shoppers)
- Enterprise deals closing ‚Üí +$80K
- Multi-retailer bundle revenue ‚Üí +$40K
- **Total: $509K ARR**

**Critical:** Upsell CAC = 24% of new customer CAC (expansion is cheaper!)

---

## üõ°Ô∏è Retest Guarantee: Managed Risk

### The Quality Scoring System

```python
def calculate_quality_score(response) -> int:
    """Generate 0-100 quality score"""
    
    score = 100
    flags = []
    
    # Time check (too fast = suspicious)
    if response.completion_time < 60:  # <1 min for 5-min survey
        score -= 30
        flags.append('speeding')
    
    # Straightlining (all same answers)
    if response.variance < 0.5:  # Low variance in ratings
        score -= 25
        flags.append('straightlining')
    
    # Open-ended quality (AI-powered)
    text_quality = analyze_text_quality(response.open_ended_answers)
    if text_quality < 0.3:
        score -= 20
        flags.append('low_effort_text')
    
    # Device fingerprint (multiple submissions)
    if check_duplicate_device(response.device_id):
        score -= 40
        flags.append('potential_duplicate')
    
    return {
        'score': max(0, score),
        'flags': flags,
        'eligible_for_retest': score >= 40 and 'potential_duplicate' not in flags
    }
```

### Approval Workflow

```python
quality_score = calculate_quality_score(response)

if quality_score >= 80:
    # Auto-approve
    approve_response()
    pay_shopper()
    
elif quality_score >= 60:
    # Manual review (Priority 2)
    flag_for_review(priority='medium')
    hold_payment()
    
elif quality_score >= 40:
    # Manual review (Priority 1) - likely retest
    flag_for_review(priority='high')
    offer_retest()
    
else:
    # Auto-reject
    reject_response()
    ban_if_fraud()
```

### Retest Policy (One-Time Only)

**Eligible for retest:**

- Quality score 40-79 (borderline, not fraud)
- First-time issue (no history of problems)
- One retest per original test (max)
- Must claim within 7 days

**NOT eligible:**

- Quality score <40 (clear fraud/bad faith)
- Multiple violations (speeding + straightlining + poor text)
- Already used retest guarantee
- Fraud indicators (bot, duplicate account)

### Financial Impact Modeling

```
At 5% retest rate:
- 1,000 shops/year √ó 5% = 50 retests
- Cost: 50 √ó $30 = $1,500 additional
- Margin impact: 63% ‚Üí 61.15%

At 10% retest rate:
- 100 retests √ó $30 = $3,000
- Margin: 63% ‚Üí 59.3%

At 25% retest rate:
- 250 retests √ó $30 = $7,500
- Margin: 63% ‚Üí 55.6%
- DANGER ZONE - business model breaks

Target: Keep retest rate <10% through quality controls
```

---

## üöÄ Immediate Execution Plan (Oct 9-21)

### Week 1 (Oct 9-15): SURVIVAL MODE

**Day 1-2: Critical Decisions**

1. ‚úÖ **Decide pricing** - $69/shopper or accept losses?
2. ‚úÖ **Secure working capital** - Do we have $30-50K runway?
3. ‚úÖ **Commit to own panel** - 6-month deadline or die

**Day 3-4: Security (Unblock $88K Enterprise)**
4. ‚úÖ Andre: Implement MFA (Supabase Auth)
5. ‚úÖ Andre: Enable RLS on all tables
6. ‚úÖ Andre: Add input validation

**Day 5-7: UX Fixes (Tester Feedback)**
7. ‚úÖ Add Amazon reviews to product cards
8. ‚úÖ Fix flexible test flow (1 product, N prices)
9. ‚úÖ Multi-retailer pricing UI

---

### Week 2 (Oct 16-21): CLOSE DEALS + WALMART

**Day 1-2: Sales**
10. ‚úÖ Close Simply Good Foods ($12,740)
11. ‚úÖ Lasko discovery call (identify must-haves)

**Day 3-4: Walmart Prep**
12. ‚úÖ Final Walmart testing (beta customers)
13. ‚úÖ Press release finalized

**Day 5: Walmart Launch**
14. ‚úÖ Oct 21: Soft launch (press release, beta only)

**Day 6-7: Pipeline Conversion**
15. ‚úÖ Convert 2-3 from $88K pipeline
16. ‚úÖ Target: $50K+ closed by Oct 31

---

## üèóÔ∏è Phase 1: Own Panel Foundation (Months 1-3)

### Month 1: Recruitment Infrastructure

**Week 1-2: Panel Management Setup**

1. ‚úÖ Select panel software (or build simple internal tool)
2. ‚úÖ Set up shopper database
3. ‚úÖ Build screening questionnaire
4. ‚úÖ Create onboarding flow

**Week 3-4: Recruitment Launch**
5. ‚úÖ University partnerships (recruit students)
6. ‚úÖ Social media campaigns (Facebook, Instagram targeting)
7. ‚úÖ Community organizations (local groups)
8. ‚úÖ Referral program ($10 per successful referral)

**Goal:** 50-100 shoppers recruited by Month 1 end

---

### Month 2: Training & Quality Systems

**Week 1-2: Shopper Training**

1. ‚úÖ Create training videos
2. ‚úÖ Build knowledge base
3. ‚úÖ Quality standards documentation
4. ‚úÖ Practice tests for new shoppers

**Week 3-4: Quality Control**
5. ‚úÖ Implement quality scoring algorithm
6. ‚úÖ Build review dashboard
7. ‚úÖ Set up fraud detection
8. ‚úÖ Create retest workflow

**Goal:** 150-200 trained shoppers, quality system operational

---

### Month 3: Hybrid Operations

**Week 1-4: Transition Phase**

1. ‚úÖ Run 70% tests on own panel, 30% Respondent.io
2. ‚úÖ Monitor quality scores (target: 4.2/5.0+)
3. ‚úÖ Track completion rates (target: 85%+)
4. ‚úÖ Measure time-to-fill (target: <48 hours)

**Go/No-Go Decision (End of Month 3):**

- Quality scores: >4.2/5.0? ‚úÖ
- Completion rates: >85%? ‚úÖ
- Time-to-fill: <48 hours? ‚úÖ
- Cost per shopper: <$35? ‚úÖ

**If YES:** Proceed to Phase 2 (scale own panel)  
**If NO:** Extend hybrid, fix issues before scaling

---

## üìä Statistical Rigor Implementation

### Module-Specific Recommendations

```typescript
const SAMPLE_SIZE_RECOMMENDATIONS = {
  pricing: {
    explorer: 25,       // $1,225 - Directional only
    professional: 132,  // $6,468 - Confident decisions
    enterprise: 264,    // $12,936 - High-stakes validation
    effectSize: 0.10,
    reasoning: "Price sensitivity requires detecting 10% shifts"
  },
  
  packaging: {
    explorer: 25,
    professional: 75,   // $3,675 - Visual preferences stronger
    enterprise: 150,
    effectSize: 0.15,
    reasoning: "Visual signals are clearer, need less statistical power"
  },
  
  claims: {
    explorer: 50,       // Claims too subtle for 25
    professional: 225,  // $11,025 - Need high power
    enterprise: 450,
    effectSize: 0.08,
    reasoning: "Claims are nuanced, require larger samples"
  },
  
  head_to_head: {
    explorer: 25,
    professional: 132,
    enterprise: 264,
    effectSize: 0.12
  },
  
  advertising: {
    explorer: 50,       // 25 test + 25 control minimum
    professional: 150,  // 75 test + 75 control
    enterprise: 300,
    effectSize: 0.20,
    requiresControl: true,
    reasoning: "Brand lift measurement needs control group"
  }
};
```

### RobbieChat Help Explains Stats

**In assisted form sidebar:**

```
Step 5: Sample Size

Form shows:
‚óã Explorer: 25 shoppers ($1,225)
‚óè Professional: 132 shoppers ($6,468) ‚úÖ RECOMMENDED
‚óã Enterprise: 264 shoppers ($12,936)

RobbieChat sidebar:
"For 3-way pricing test, I recommend Professional tier (132 shoppers).

Why? You need 44 per variant to reliably detect 10% preference 
differences with 95% confidence.

This costs $6,468 but gives you data you can bet $2M on.

Explorer tier (25 shoppers) only gives directional insights - 
not appropriate for final launch decisions.

{expertMode && [Show Me The Math]}

Want Professional or adjust?"
```

**Expert mode reveals:**

```
Formula: n = 2(Z_Œ±/2 + Z_Œ≤)¬≤ √ó p(1-p) / d¬≤

Parameters:
‚Ä¢ Z_Œ±/2 = 1.96 (95% confidence interval)
‚Ä¢ Z_Œ≤ = 0.84 (80% statistical power)
‚Ä¢ p = 0.33 (expected proportion for 3-way split)
‚Ä¢ d = 0.10 (10% minimum detectable difference)

Calculation:
n = 2(1.96 + 0.84)¬≤ √ó 0.33(0.67) / 0.10¬≤
n = 2(7.84) √ó 0.2211 / 0.01
n = 40.7 per variant

Minimum: 41 √ó 3 = 123 shoppers
Recommended: 132 (includes 7% buffer for dropouts)
```

---

## üíº Stripe Payment Architecture

### Credit-Based System

```typescript
// Stripe Billing Credits
const creditPackages = [
  {
    name: '10 Tests Starter',
    credits: 250,      // 10 tests √ó 25 shoppers
    price: 12250,      // $49 √ó 250
    discount: 0,
    popular: false
  },
  {
    name: '50 Tests Professional',
    credits: 1320,     // 50 tests √ó avg 26.4 shoppers
    price: 58000,      // $44/shopper (10% volume discount)
    discount: 0.10,
    popular: true,
    savings: 6500
  },
  {
    name: '100 Tests Enterprise',
    credits: 2640,
    price: 103000,     // $39/shopper (20% volume discount)
    discount: 0.20,
    popular: false,
    savings: 26000
  }
];

// Credit consumption
async function consumeCredits(userId: string, amount: number) {
  const balance = await getCreditsBalance(userId);
  
  if (balance < amount) {
    throw new InsufficientCreditsError('Not enough credits');
  }
  
  await deductCredits(userId, amount);
  await logCreditUsage(userId, amount, 'test_launched');
  
  // Trigger low balance alert
  if (balance - amount < 25) {
    await sendLowCreditsEmail(userId);
  }
}
```

### Webhook Integration

```typescript
// Stripe webhook handler
app.post('/webhooks/stripe', async (req, res) => {
  const event = stripe.webhooks.constructEvent(
    req.body,
    req.headers['stripe-signature'],
    process.env.STRIPE_WEBHOOK_SECRET
  );
  
  switch (event.type) {
    case 'checkout.session.completed':
      // Credit purchase completed
      await addCredits(event.data.object.client_reference_id, credits);
      await sendPurchaseConfirmation(userId);
      break;
      
    case 'invoice.payment_failed':
      // Subscription payment failed
      await handlePaymentFailure(customerId);
      await sendPaymentFailureEmail(userId);
      break;
      
    case 'customer.subscription.deleted':
      // Subscription canceled
      await handleCancellation(subscriptionId);
      break;
  }
  
  res.json({ received: true });
});
```

---

## üé® The Four Interfaces (Final Architecture)

### 1. HeyShopper Brand Portal (heyshopper.com/brand)

**For:** CPG brand customers  
**Purpose:** Run tests, view results

**Modes:**

- **TestPilot mode:** Professional only, no personality
- **HeyShopper mode:** + RobbieChat, personality, intelligence

**Features:**

- Assisted forms with RobbieChat help sidebar
- 5 test modules
- Retailer skins (Amazon, Walmart, Costco, Target, TikTok)
- Statistical rigor (3 tiers: 25/132/264 shoppers)
- Activities upsells (Last Chance page)
- Credit management
- PDF reports

**RobbieBar:**

```
Menu: [Tests, Products, Insights, Credits, Settings]
Status: [Active: 3, Ready: 2, Credits: 145]
Actions: [New Test, Search, Export]
```

---

### 2. HeyShopper Shopper Portal (heyshopper.com/shopper)

**For:** Shoppers taking tests  
**Purpose:** Complete surveys, earn rewards

**Features:**

- Google OAuth signup (encouraged!)
- Profile setup (demographics, interests)
- Test invitations (matched to profile)
- Conversational surveys (RobbieChat interviews)
- Activities (Circle & Cross, etc.)
- Rewards tracking
- Payment via PayPal/Amazon gift cards

**No RobbieBar** (simple mobile-first survey interface)

---

### 3. Robbie@TestPilot (aurora.testpilot.ai/testpilot) üÜï

**For:** Allan, team, operations  
**Purpose:** Manage TestPilot BUSINESS

**Same architecture as Robbie@Work, @Play, @Code:**

- RobbieBar universal interface
- RobbieBlocks components
- Personality system (6 moods)
- Same visual design

**Dashboards:**

**Sales & Revenue:**

- Pipeline view ($88K deals in stages)
- Deal health indicators
- Customer accounts (40 betas ‚Üí paid conversions)
- Revenue analytics (ARPU, LTV, churn)
- Expansion opportunities

**Test Operations:**

- Active tests monitor (real-time status)
- Quality dashboard (retest queue)
- Shopper session tracking
- Completion rates by module
- Statistical significance alerts

**Shopper Panel Management:**

- Panel size & availability
- Quality score distribution
- Recruitment funnel
- Reward payouts
- Fraud alerts

**Platform Intelligence:**

- Self-optimization dashboard
- Upsell conversion rates
- Optimal discount analysis
- NPS tracking
- Churn risk alerts

**Team Management:**

- Dr. Dave review queue
- Andre task board
- Support tickets
- Capacity planning

**RobbieBar for @TestPilot:**

```typescript
{
  menuItems: [
    'Pipeline',      // $88K deals
    'Tests',         // Active test ops
    'Shoppers',      // Panel management
    'Revenue',       // Analytics
    'Customers',     // Account health
    'Team'           // Operations
  ],
  
  statusTrackers: [
    { label: 'Pipeline', value: '$88K', color: 'green' },
    { label: 'Active Tests', count: 6, color: 'cyan' },
    { label: 'Panel Size', count: 247, color: 'purple' },
    { label: 'Churn Risk', count: 2, color: 'red', pulse: true }
  ],
  
  quickActions: [
    'New Deal',
    'Monitor Tests',
    'Check Panel',
    'Review Quality'
  ]
}
```

---

### 4. Robbie@Work (aurora.testpilot.ai/work) - Existing

**For:** Allan's consulting business  
**Purpose:** CRM, deals, pipeline

---

## üõí Retailer Skins: Pluggable Architecture

### The Skin System

```sql
-- Retailer configurations
CREATE TABLE retailer_skins (
  id UUID PRIMARY KEY,
  code VARCHAR(50) UNIQUE,  -- 'amazon', 'walmart', 'costco', 'target', 'tiktok'
  name TEXT,
  logo_url TEXT,
  
  -- Visual layout
  layout_config JSONB,
  
  -- Scraping/API configuration  
  data_source_config JSONB,
  
  -- Screening questions
  screening_questions JSONB,
  
  -- Pricing
  base_price_per_shopper INTEGER DEFAULT 49,
  
  -- Status
  is_active BOOLEAN DEFAULT true,
  launch_date DATE,
  
  created_at TIMESTAMPTZ
);
```

### Five Retailer Skins

#### **1. Amazon (Live)**

```json
{
  "code": "amazon",
  "layout": {
    "showPrimeBadge": true,
    "showStarRating": true,
    "showReviewCount": true,
    "showFreeShipping": true,
    "accentColor": "#FF9900"
  },
  "dataSource": {
    "type": "hardcoded_mvp",  // Start here
    "upgradePathAPI": "Product Advertising API",
    "scrapingFallback": true
  },
  "screeningQuestions": [
    "Have you purchased on Amazon in the last 3 months?",
    "Do you have Amazon Prime?"
  ]
}
```

#### **2. Walmart (Launching Oct 21)**

```json
{
  "code": "walmart",
  "layout": {
    "showSavingsTag": true,
    "showStarRating": true,
    "showFreePickup": true,
    "accentColor": "#0071CE"
  },
  "dataSource": {
    "type": "hardcoded_mvp",
    "scrapingFallback": true,
    "note": "No public Walmart API - manual curation for MVP"
  },
  "screeningQuestions": [
    "Have you shopped at Walmart in the last month?",
    "Do you shop online or in-store?"
  ]
}
```

#### **3. Costco (Q1 2026)**

```json
{
  "code": "costco",
  "layout": {
    "showMemberPrice": true,
    "showBulkSize": true,
    "showUnitPrice": true,
    "accentColor": "#E31837"
  },
  "screeningQuestions": [
    "Do you have a Costco membership?",
    "How often do you shop at Costco?"
  ]
}
```

#### **4. Target (Q1 2026)**

```json
{
  "code": "target",
  "layout": {
    "showCircleRewards": true,
    "showSameDayDelivery": true,
    "accentColor": "#CC0000"
  }
}
```

#### **5. TikTok Shop (Q2 2026)**

```json
{
  "code": "tiktok",
  "layout": {
    "showCreatorAttribution": true,
    "showViralMetrics": true,
    "videoPreview": true,
    "accentColor": "#000000"
  },
  "screeningQuestions": [
    "Do you use TikTok daily?",
    "Have you purchased from TikTok Shop?"
  ]
}
```

### Adding New Retailer (1 Week)

**Day 1: Create skin config**

- Layout design
- Screening questions
- Data source strategy (hardcoded ‚Üí scraping ‚Üí API)

**Days 2-4: Build scraper/integration**

- Product data extraction
- Image retrieval
- Pricing scraping
- Error handling

**Days 5-7: Test & deploy**

- QA with real products
- Beta test with 5 customers
- Production deployment

**Cost:** ~$3-5K development + $1-2K testing

---

## üí≥ Pricing Strategy (Corrected for Margins)

### Current Crisis

```
Respondent.io cost: $60/shopper
Current pricing: $49/shopper
LOSS: -$11/shopper (-18% margin)
```

### Three Pricing Approaches

#### **Approach 1: Temporary Premium Pricing**

```
Explorer: $39/shopper (25 shoppers) = $975
Professional: $69/shopper (132 shoppers) = $9,108
Enterprise: $59/shopper (200+ shoppers) = $11,800+

Margins with Respondent.io:
$69 revenue - $60 cost = $9 profit (13% margin)

Timeline: Months 1-6 (until own panel)
Positioning: "Premium for statistical rigor"
```

#### **Approach 2: Accept Losses, Build Panel Fast**

```
Keep $49/shopper pricing (competitive)
Accept -$11/shopper as CAC
Requires: $30-50K working capital
Deadline: Own panel live by Month 6 OR run out of cash

Risk: High
Upside: Competitive pricing, market share
```

#### **Approach 3: Hybrid Pricing**

```
Explorer: $49/shopper (loss leader, attracts customers)
Professional: $69/shopper (profitable)
Enterprise: Custom (volume discounts, still profitable)

Most customers choose Professional (guided by Robbie)
Explorer exists for price-sensitive, low-risk tests
```

### **RECOMMENDED: Approach 3 (Hybrid)**

- Explorer at $49 (accept small losses on entry tier)
- Professional at $69 (profitable, most popular)
- Enterprise custom (negotiate based on volume)
- Position Professional as "industry standard"
- Use RobbieChat to guide toward Professional tier

---

## üöÄ Critical Path: Lasko Deal ($15K)

### 7-Week Timeline (Zero Float)

**Week 1-2: Discovery & Demo**

- Day 1-2: Discovery call (identify pain points, requirements)
- Day 3-4: Gap analysis (what's missing vs what they need)
- Day 5-7: Demo existing capabilities
- **Deliverable:** Requirements doc, feature gap list

**Week 3-4: Must-Have Features**

- Shopping mission creation ‚úÖ (exists)
- Photo capture/upload ‚úÖ (exists)
- Price tracking ‚úÖ (exists)
- Basic reporting ‚úÖ (exists)
- Data export ‚úÖ (exists)
- User management ‚úÖ (exists)
- **GAP FEATURES:**
  - Multi-location tracking (if needed)
  - Custom screening (implement if required)

**Week 5-6: UAT & Training**

- Customer testing (real scenarios)
- Bug fixes
- Training materials
- Team onboarding

**Week 7: Launch**

- Go-live
- Support standing by
- Monitor closely

**Critical:** Any delay in Week 1-2 discovery cascades through entire timeline!

---

## üìß Sales Tax & Compliance (Can't Ignore)

### Sales Tax Reality

**25 states tax SaaS/digital services:**

- Economic nexus: $100K-500K revenue OR 200 transactions
- HeyShopper = likely "digital service" (taxable)

**Solution: Stripe Tax**

- Cost: 0.5% of transaction + $10/month per filing
- Automated: calculation, collection, filing
- Covers: US states, EU VAT, international

**Action:** Integrate Stripe Tax before hitting $100K revenue

---

### Prepaid Credits Tax Treatment

**Revenue Recognition:**

- Credits purchased = deferred revenue (not taxed yet)
- Credits consumed = revenue recognized (taxed then)
- Expired credits = breakage revenue (taxed on expiration)

**Accounting:**

```sql
CREATE TABLE credit_transactions (
  id UUID PRIMARY KEY,
  user_id UUID,
  amount DECIMAL,
  type VARCHAR(20),  -- 'purchase', 'consumption', 'expiration'
  balance_after DECIMAL,
  revenue_recognized BOOLEAN DEFAULT false,
  tax_remitted BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ
);
```

**Immediate actions:**

1. Consult tax professional (CPA familiar with SaaS)
2. Integrate Stripe Tax
3. Determine nexus in all states
4. Register where nexus exists

---

## üìã Complete Task List (All 60+ Tasks)

### Phase 0: Survival (Oct 9-21)

**Critical Decisions (This Week):**

1. ‚úÖ Decide pricing strategy ($69 or accept losses?)
2. ‚úÖ Secure working capital ($30-50K for panel transition)
3. ‚úÖ Commit to own panel deadline (6 months)

**Security (Andre - Week 1):**
4. ‚úÖ Day 1-2: Implement MFA (Supabase Auth)
5. ‚úÖ Day 3-4: Enable RLS on all tables
6. ‚úÖ Day 5: Strong password policies + session management

**Security (Andre - Week 2):**
7. ‚úÖ Days 1-2: Input validation (server-side)
8. ‚úÖ Days 3-4: XSS prevention (DOMPurify, helmet.js)
9. ‚úÖ Day 5: CSRF protection

**UX Fixes:**
10. ‚úÖ Add Amazon reviews/ratings to products
11. ‚úÖ Flexible test flow (1 product, N prices)
12. ‚úÖ Multi-retailer pricing UI

**Sales:**
13. ‚úÖ Close Simply Good Foods ($12,740)
14. ‚úÖ Lasko discovery call
15. ‚úÖ Simply Good Foods discovery
16. ‚úÖ Walmart soft launch (Oct 21)
17. ‚úÖ Convert 2-3 from pipeline

**Target:** $50K+ closed by Oct 31

---

### Phase 1: Own Panel Foundation (Months 1-3)

**Month 1: Recruitment Infrastructure**
18. ‚úÖ Select panel management software
19. ‚úÖ Build shopper database
20. ‚úÖ Create screening questionnaire
21. ‚úÖ Build onboarding flow
22. ‚úÖ University partnerships
23. ‚úÖ Social media recruitment campaigns
24. ‚úÖ Referral program ($10/successful referral)

**Goal:** 50-100 shoppers recruited

**Month 2: Training & Quality**
25. ‚úÖ Create training videos
26. ‚úÖ Build knowledge base
27. ‚úÖ Quality standards docs
28. ‚úÖ Quality scoring algorithm
29. ‚úÖ Review dashboard for QA
30. ‚úÖ Fraud detection system
31. ‚úÖ Retest workflow

**Goal:** 150-200 trained shoppers, quality system live

**Month 3: Hybrid Operations**
32. ‚úÖ Run 70% own panel, 30% Respondent.io
33. ‚úÖ Monitor quality (target: 4.2/5.0+)
34. ‚úÖ Track completion (target: 85%+)
35. ‚úÖ Measure time-to-fill (target: <48h)

**Go/No-Go:** Quality + completion + speed all hitting targets?

---

### Phase 2: Core Systems (Months 4-6)

**Assisted Forms + RobbieChat:**
36. ‚úÖ Build form framework (step-by-step)
37. ‚úÖ Module-specific dynamic forms
38. ‚úÖ RobbieChat help sidebar integration
39. ‚úÖ Inline smart suggestions

**Retailer Skins:**
40. ‚úÖ Build pluggable skin architecture
41. ‚úÖ Amazon skin (complete with scraper)
42. ‚úÖ Walmart skin (complete with scraper)
43. ‚úÖ Costco skin (schema ready, launch Q1)
44. ‚úÖ Target skin (schema ready, launch Q1)

**Statistical Services:**
45. ‚úÖ Sample size calculator (module-specific)
46. ‚úÖ Significance testing on results
47. ‚úÖ Legal disclaimers (25/132/264 tiers)

**RobbieBar:**
48. ‚úÖ Build shared component package
49. ‚úÖ HeyShopper config
50. ‚úÖ Robbie@TestPilot config
51. ‚úÖ Expert mode toggle

**SentinelGate Auth:**
52. ‚úÖ Google OAuth (primary)
53. ‚úÖ Email/password fallback
54. ‚úÖ Brand vs Shopper role assignment
55. ‚úÖ Onboarding wizards
56. ‚úÖ Welcome email automation

---

### Phase 3: Revenue Optimization (Months 7-9)

**Self-Optimization Engine:**
57. ‚úÖ Usage analytics system
58. ‚úÖ "Last Chance" upsell page
59. ‚úÖ Discount engine (up to 30%)
60. ‚úÖ Respectful "no" tracking
61. ‚úÖ Email automation (as Robbie)
62. ‚úÖ Weekly auto-optimization

**Activities:**
63. ‚úÖ Circle & Cross implementation
64. ‚úÖ Heat Map tool
65. ‚úÖ Drag-to-Rank interface
66. ‚úÖ Emotional Response tracker

**Intelligence:**
67. ‚úÖ Vector-enable all feedback
68. ‚úÖ Cross-test pattern detection
69. ‚úÖ Predictive recommendations

**NPS:**
70. ‚úÖ Adaptive NPS system
71. ‚úÖ Intervention workflows
72. ‚úÖ Churn prevention

---

### Phase 4: Scale & Enterprise (Months 10-12)

**Retailer Expansion:**
73. ‚úÖ Launch Costco skin
74. ‚úÖ Launch Target skin
75. ‚úÖ Launch TikTok Shop skin

**Enterprise Features:**
76. ‚úÖ Team collaboration
77. ‚úÖ Enhanced screening
78. ‚úÖ White-label reports
79. ‚úÖ SOC 2 compliance
80. ‚úÖ SSO integration

**Robbie@TestPilot:**
81. ‚úÖ Build fourth Robbieverse app
82. ‚úÖ Pipeline management
83. ‚úÖ Test operations dashboard
84. ‚úÖ Panel management
85. ‚úÖ Revenue analytics
86. ‚úÖ Team coordination

---

## üéØ Success Metrics (Honest Targets)

### Phase 0 (Oct 31)

- ‚úÖ $50K+ closed revenue
- ‚úÖ Pricing decision made (survival)
- ‚úÖ Security Tier 1 complete
- ‚úÖ Walmart launched

### Month 3 (Go/No-Go)

- ‚úÖ 150 shoppers recruited
- ‚úÖ Quality: 4.2/5.0+
- ‚úÖ Completion: 85%+
- ‚úÖ Time-to-fill: <48h
- ‚úÖ Decision: Scale own panel OR pivot

### Month 6 (Critical)

- ‚úÖ Own panel = 80% of tests
- ‚úÖ Margins turn positive (39%+)
- ‚úÖ $250K ARR
- ‚úÖ Respondent.io = backup only

### Month 12 (Target)

- ‚úÖ $500K ARR
- ‚úÖ Own panel = 95%
- ‚úÖ 5 retailer skins live
- ‚úÖ Churn <10%
- ‚úÖ NPS 60+

---

## üí° Why This WILL Work

### Your Vision + Friend's Reality = Executable Plan

**Vision provides:**

- Real vs Synthetic positioning (competitive advantage)
- RobbieChat intelligence (customer lock-in)
- Robbieverse integration (cross-product value)
- Self-optimizing revenue (automated growth)

**Reality provides:**

- Margin crisis awareness (fix or die)
- Own panel economics (the real business model)
- Security priorities (tier system for Andre)
- Beta-to-paid strategy (aligned incentives)

**Combined:**

- Close $88K with current product (survival)
- Transition to own panel in 6 months (sustainability)
- Build intelligence layer while transitioning (competitive advantage)
- Scale to $500K with profitable unit economics (success)

---

## üö® Critical Success Factors

### 1. Own Panel Transition (EXISTENTIAL)

**Deadline:** 6 months  
**Investment:** $30-40K  
**Make-or-break:** If this fails, business dies

### 2. Close $88K Pipeline (SURVIVAL)

**Deadline:** Q4 2024  
**Critical:** Cash funds panel development

### 3. Security Implementation (DEAL-BLOCKER)

**Owner:** Andre  
**Timeline:** 4 weeks  
**Risk:** Enterprise deals blocked without Tier 1

### 4. Paid Beta Conversions (REVENUE)

**Target:** 10 of 40 betas convert  
**Offer:** 30% founding customer discount  
**Value:** $25-50K ARR

### 5. Statistical Positioning (DIFFERENTIATION)

**Message:** 132 shoppers = industry standard rigor  
**Tiers:** 25 (directional) / 132 (confident) / 200+ (premium)

---

**READY TO EXECUTE. This plan merges your vision with brutal financial reality.** üöÄüí∞

**Next:** Approve this plan, then we execute Phase 0 (close $88K, launch Walmart, fix margins).

*Complete executable plan: Vision (Real vs Synthetic, RobbieChat, Robbieverse) + Reality (negative margins, own panel deadline, security priorities, paid beta) = Path to $500K in 12 months.*

