# ğŸ¯ Priority Surface Engine

## The Surface/Submerge Strategy

**Core Principle:** Allan should ONLY see the **10 things** that matter RIGHT NOW. Everything else sinks below the fold.

This is **attention management** at scale. Not todo lists. Not inbox zero. **Focus on what moves the needle.**

---

## How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PRIORITY SURFACE (Top 10 Visible)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. ğŸ”´ Acme Corp deal closing today  ($50k)    â”‚    â”‚
â”‚  â”‚  2. ğŸ”´ Urgent email from CEO                   â”‚    â”‚
â”‚  â”‚  3. ğŸ”´ Product launch meeting in 2 hours       â”‚    â”‚
â”‚  â”‚  4. ğŸŸ¡ Schedule Q4 planning session           â”‚    â”‚
â”‚  â”‚  5. ğŸŸ¡ Review TestPilot roadmap               â”‚    â”‚
â”‚  â”‚  6. ğŸ”´ Contract renewal expires tomorrow       â”‚    â”‚
â”‚  â”‚  7. ğŸŸ¡ Weekly 1:1 with CTO                    â”‚    â”‚
â”‚  â”‚  8. ğŸ”´ Bug fix needed for demo                â”‚    â”‚
â”‚  â”‚  9. ğŸŸ¡ Investor update email                  â”‚    â”‚
â”‚  â”‚ 10. ğŸŸ¢ Delegate hiring task to recruiter      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SUBMERGED (Everything Else - Grouped)           â”‚
â”‚  â”Œâ”€ Q1: DO NOW (3 more) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”œâ”€ Q2: SCHEDULE (12 items) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”œâ”€ Q3: DELEGATE (8 items) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â””â”€ Q4: ELIMINATE (47 items - auto-archive) â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Eisenhower Matrix Implementation

Every item gets scored on **2 dimensions**:

### 1ï¸âƒ£ Importance Score (0-100)

**Revenue Potential** (0-40 points):
- High $ deals get priority
- Weighted by probability of close

**Sender/Participant Importance** (0-30 points):
- Founder/CEO: 30 points
- C-level: 25 points
- VP/Director: 20 points
- Manager: 15 points
- Individual: 10 points

**Business Relationship** (0-20 points):
- Strategic partner: 20 points
- Key customer: 18 points
- Active prospect: 15 points
- Cold lead: 5 points

**Strategic Tag** (0-10 points):
- Manually flagged as strategic

### 2ï¸âƒ£ Urgency Score (0-100)

**Deadline Proximity** (0-50 points):
- Overdue: 50 points
- Today (< 4 hours): 45 points
- Tomorrow (< 24 hours): 35 points
- This week: 25 points
- Next week: 15 points
- Future: 5 points

**Expected Response Time** (0-30 points):
- Immediate (< 4 hours): 30 points
- Same day: 20 points
- 2 days: 10 points

**Urgency Keywords** (0-20 points):
- "urgent", "asap", "immediate": 10 points
- "critical", "deadline": 8 points
- "today", "now": 7 points
- "emergency": 10 points

---

## Quadrant Classification

```
           URGENT              NOT URGENT
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚                  â”‚
I       â”‚  Q1: DO NOW  â”‚  Q2: SCHEDULE    â”‚
M       â”‚  ğŸ”´ 100% wt  â”‚  ğŸŸ¡ 70% weight   â”‚
P       â”‚              â”‚                  â”‚
O       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
R       â”‚              â”‚                  â”‚
T       â”‚ Q3: DELEGATE â”‚  Q4: ELIMINATE   â”‚
A       â”‚ ğŸŸ¢ 40% wt    â”‚  âšª 10% weight   â”‚
N       â”‚              â”‚                  â”‚
T       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Q1: DO NOW** (Important + Urgent)
- Immediate action required
- Highest priority
- Should be < 3-5 items at any time

**Q2: SCHEDULE** (Important + Not Urgent)
- Plan time blocks
- Strategic work lives here
- Most valuable long-term items

**Q3: DELEGATE** (Not Important + Urgent)
- Someone else should do this
- Auto-suggest delegation
- Free up Allan's time

**Q4: ELIMINATE** (Not Important + Not Urgent)
- Noise, spam, FYIs
- Auto-archive after 48 hours
- Never surface these

---

## What Gets Prioritized

### âœ… Emails
- Revenue potential (from sender/company)
- Sender importance score
- Keywords (urgent, asap, deadline)
- Thread activity (responses, mentions)
- Labels (important, starred)

### âœ… Tasks
- Explicit priority (critical, high, medium, low)
- Due dates
- Revenue connection (linked to deals)
- Dependencies (blockers)

### âœ… Meetings
- Start time proximity (urgent if < 2 hours)
- Attendee importance (who's in the meeting?)
- Meeting type (1:1, sales, strategic)
- Revenue connection (sales calls prioritized)

### âœ… Deals (HubSpot)
- Deal amount Ã— close probability = revenue potential
- Close date proximity
- Deal stage (closing soon = urgent)
- Deal score (HubSpot's scoring)

---

## API Endpoints

### Get Top 10 Priorities

```bash
GET http://localhost:8002/api/priorities/surface?top_n=10&user=allan
```

**Response:**
```json
{
  "surfaced": [
    {
      "id": "deal_12345",
      "type": "deal",
      "title": "Acme Corp - Enterprise Plan",
      "priority": "ğŸ”´ DO NOW",
      "priority_score": 95.3,
      "importance": 90.0,
      "urgency": 85.0,
      "revenue_potential": 50000,
      "deadline": "2025-10-06T17:00:00Z",
      "context": {
        "amount": 50000,
        "stage": "negotiation",
        "probability": 80
      }
    },
    ...
  ],
  "submerged": {
    "Q1_DO_NOW": [...],
    "Q2_SCHEDULE": [...],
    "Q3_DELEGATE": [...],
    "Q4_ELIMINATE": [...]
  },
  "stats": {
    "total_items": 127,
    "surfaced_count": 10,
    "submerged_count": 117,
    "q1_count": 13,
    "q2_count": 34,
    "q3_count": 28,
    "q4_count": 52
  }
}
```

### Get Items by Quadrant

```bash
GET http://localhost:8002/api/priorities/quadrant/Q1_DO_NOW?user=allan
```

Returns all items in Q1 (DO NOW) quadrant.

### Get Priority Stats

```bash
GET http://localhost:8002/api/priorities/stats?user=allan
```

Returns distribution across quadrants.

---

## Integration with Unified Interface

The Robbie Unified Interface connects to Priority Surface API:

```javascript
// Fetch top 10 priorities
fetch('http://localhost:8002/api/priorities/surface?top_n=10')
  .then(res => res.json())
  .then(data => {
    // Display surfaced items at top
    renderPriorities(data.surfaced);
    
    // Show submerged count (collapsible)
    renderSubmergedCount(data.stats);
  });
```

**UI Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ YOUR TOP 10 PRIORITIES              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. ğŸ”´ Deal closing - $50k      â”‚    â”‚
â”‚  â”‚ 2. ğŸ”´ CEO email (urgent)       â”‚    â”‚
â”‚  â”‚ 3. ğŸ”´ Meeting in 2 hours       â”‚    â”‚
â”‚  â”‚ ... (7 more)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  â–¼ 117 more items (click to expand)    â”‚
â”‚     â€¢ 13 DO NOW                         â”‚
â”‚     â€¢ 34 SCHEDULE                       â”‚
â”‚     â€¢ 28 DELEGATE                       â”‚
â”‚     â€¢ 52 ELIMINATE (auto-archived)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Auto-Actions

### Q4 Auto-Archive
Items in Q4 (Eliminate) are **automatically archived** after 48 hours of inactivity.

### Q3 Auto-Delegate
Items in Q3 trigger **delegation suggestions**:
- "This looks urgent but not strategic - delegate to [person]?"

### Q1 Alerts
If Q1 has > 10 items, alert Allan:
- "Too many urgent items - consider delegating or rescheduling"

---

## Scoring Examples

### Example 1: High-Value Deal Closing Today
```
Deal: "Acme Corp - $50k contract"
- Revenue: $50k Ã— 80% probability = $40k â†’ 40 points (importance)
- Deadline: Today at 5pm â†’ 45 points (urgency)
- Strategic: Yes â†’ +10 points (importance)
Total Importance: 50
Total Urgency: 45
â†’ Quadrant: Q1 (DO NOW)
â†’ Priority Score: 95.3 ğŸ”´
```

### Example 2: Strategic Meeting Next Week
```
Meeting: "Q4 Planning with exec team"
- Participants: CEO, CTO, CFO â†’ 30 points (importance)
- Strategic: Yes â†’ 10 points (importance)
- Deadline: Next week â†’ 15 points (urgency)
Total Importance: 60
Total Urgency: 15
â†’ Quadrant: Q2 (SCHEDULE)
â†’ Priority Score: 47.5 ğŸŸ¡
```

### Example 3: Newsletter Subscription
```
Email: "Weekly industry newsletter"
- Sender: Marketing automation â†’ 5 points (importance)
- No deadline â†’ 5 points (urgency)
Total Importance: 5
Total Urgency: 5
â†’ Quadrant: Q4 (ELIMINATE)
â†’ Priority Score: 3.2 âšª
â†’ Auto-archive in 48 hours
```

---

## Configuration

### Thresholds

```python
# Eisenhower thresholds
IMPORTANT_THRESHOLD = 50  # Above = important
URGENT_THRESHOLD = 50     # Above = urgent

# Quadrant weights (for priority score calculation)
Q1_WEIGHT = 1.0   # DO NOW
Q2_WEIGHT = 0.7   # SCHEDULE
Q3_WEIGHT = 0.4   # DELEGATE
Q4_WEIGHT = 0.1   # ELIMINATE

# Auto-actions
Q4_AUTO_ARCHIVE_HOURS = 48    # Archive Q4 items after 48h
Q1_MAX_ITEMS_WARNING = 10     # Warn if > 10 items in Q1
```

### Custom Scoring

Override importance/urgency for specific items:

```python
# In priority_engine.py
item = {
    "id": "task_123",
    "type": "task",
    "title": "Review contract",
    "importance_override": 85,  # Force high importance
    "urgency_override": 90      # Force high urgency
}
```

---

## Real-Time Updates

Priority Surface subscribes to event bus for real-time updates:

```python
# When new email arrives
redis.publish("aurora:priority:update", json.dumps({
    "action": "new_item",
    "type": "email",
    "id": "email_123",
    "requires_rescore": True
}))
```

The web frontend listens and **auto-refreshes** top 10 when priorities change.

---

## Monitoring

### Prometheus Metrics

```
aurora_priorities_total{quadrant="q1"} 13
aurora_priorities_total{quadrant="q2"} 34
aurora_priorities_total{quadrant="q3"} 28
aurora_priorities_total{quadrant="q4"} 52

aurora_priorities_score_avg{type="email"} 42.3
aurora_priorities_score_avg{type="deal"} 78.9
```

### Grafana Dashboard

View priority distribution over time:
- Q1 item count (should stay < 10)
- Average priority scores by type
- Time spent in each quadrant
- Auto-archive rate (Q4)

---

## Best Practices

âœ… **Keep Q1 small** - If > 10 items, something needs delegating
âœ… **Live in Q2** - Strategic work happens here (schedule it!)
âœ… **Delegate Q3** - Don't let urgent-but-not-important eat your time
âœ… **Auto-eliminate Q4** - 48 hour auto-archive keeps inbox clean
âœ… **Check priorities 3x/day** - Morning, noon, end of day
âœ… **Revenue first** - High $ deals always surface to the top
âœ… **Trust the system** - If it's not in top 10, it can wait

---

## Summary

ğŸ¯ **Surface** the top 10 priorities
ğŸŒŠ **Submerge** everything else (grouped by quadrant)
ğŸ“Š **Eisenhower Matrix** classification
ğŸ”´ **DO NOW** - Important + Urgent
ğŸŸ¡ **SCHEDULE** - Important + Not Urgent
ğŸŸ¢ **DELEGATE** - Not Important + Urgent
âšª **ELIMINATE** - Auto-archive after 48 hours
ğŸ’° **Revenue-driven** - High $ deals always surface
âš¡ **Real-time** - Updates via event bus
ğŸ“ˆ **Monitored** - Grafana dashboard

**Allan only sees what matters. Everything else fades away.** âœ¨
